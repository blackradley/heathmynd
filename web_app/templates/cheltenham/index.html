{% extends 'base.html' %}
{% load bootstrap4 %}
{% load static %}

{% block title %}Cheltenham{% endblock %}

{% block bootstrap4_before_content %}

{% endblock %}

{% block content %}
<div id="left-map">here</div>
<div id="right-map">here</div>

<script>
			var isLeftMap = false;
			var isRightMap = false;

    function initMap() {
      // The location of Cheltenham
      var cheltenham = {lat: 51.89938, lng: -2.0782};
      var gloucester = {lat: 51.86568, lng: -2.2431};
      // The map, centered at Cheltenham
      var leftMap = new google.maps.Map(
          document.getElementById('left-map'), {zoom: 10, center: cheltenham});
      var rightMap = new google.maps.Map(
          document.getElementById('right-map'), {zoom: 10, center: cheltenham});
      // The marker
      var marker = new google.maps.Marker({position: cheltenham, map: leftMap});
      var marker = new google.maps.Marker({position: gloucester, map: rightMap});
      google.maps.event.addListener(leftMap, 'bounds_changed', function() {
					if (isLeftMap) {
            var center = new google.maps.LatLng(leftMap.getCenter().lat(), leftMap.getCenter().lng());
						var zoom = parseInt(leftMap.getZoom());
						rightMap.setCenter(center);
						rightMap.setZoom(zoom);
          }
      });
      google.maps.event.addListener(leftMap, 'mouseover', function() {
          isLeftMap = true;
					isRightMap = false;
				});
				google.maps.event.addListener(leftMap, 'mouseout', function() {
					isLeftMap = false;
					isRightMap = false;
				});	






      fetch('static/data/data.json').then(function(response) {
          response.json().then(function(result) {
            let locations = result.locations.map((val) => {
              return new google.maps.LatLng(val.latitudeE7 * (10 ** -7), val.longitudeE7 * (10 ** -7));
            })
            heatmap = new google.maps.visualization.HeatmapLayer({
              data: locations,
              map: map,
              maxIntensity: maxI,
              radius: rad,
              opacity: opac
            });
          });
        });
    }
</script>
{% endblock %}

